# Use a imagem Node.js oficial como base
FROM node:18.16.0

ENV DB_URL="mongodb://mongo:27017/ACHEI_O_BICHO"
ENV MONGODB_PASSWORD=Admin@acbc
ENV MONGODB_USERNAME=adbc
ENV PORT=8080
ENV REDIS_HOST="redis"
ENV REDIS_PORT=6379
ENV REDIS_PASSWORD='O#lxYry!zEa><FKa'
ENV GLOBAL_PATH=apl-back-front/v1
ENV SECRET_KEY="I[W9X9QG>a0RkgmjiQ>X"
ENV INSTANCE_ID=instance69566
ENV TOKEN_API_MSG=1qwxsr4ofpb3nwuy
ENV TIMESTAMP_OTP=6000
ENV REGION_AWS=us-east-1
ENV AWS_ACCESS_KEY_ID=ASIA37I4JEJJZKTXL3LD
ENV AWS_SECRET_ACCESS_KEY=vdl81vrrujEaUg19CppdM2OrFP4ibmyU7IoSxZ9p
ENV AWS_SESSION_TOKEN=FwoGZXIvYXdzECsaDO6vwcNNR/tAS7+7uiK8ARl9Y2WYsAv74zlGvT3frOc9zgB8Has623Kw8q/o6oR98a0b9tvqoKO1FGqjHuyfgL5pgYrb6gf1IJAkl5gC+II/wUiByaOErBDc8J+T7XIZZgSssveUOgm9lj2XoOZ508LjJLdXUOgFEU/jSp0VPSy7y06EUkbkcv1N3IBBZsLOMjvLqw7BbHHC3d7EzEhGGQmM17dnyvdY9ErWCcsTjScGrNM0yJGf4XzpyeyrOpUTfWd7ZkFxLT5ejYoXKPygv6sGMi10iNC4RaiiErvAcnWlgrHu56XEiPGf3cQ99LND47Zj4ZO3GgOxfeapCNbmOEQ=
ENV BEARER_TOKEN_CLOUD_FUNCTION=eyJhbGciOiJSUzI1NiIsImtpZCI6ImU0YWRmYjQzNmI5ZTE5N2UyZTExMDZhZjJjODQyMjg0ZTQ5ODZhZmYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXpwIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwiYXVkIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwic3ViIjoiMTE4MDUwNjQ3OTUzMjgxNDM1NDk3IiwiZW1haWwiOiJqb3NlLmJhbmR0ZWNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImF0X2hhc2giOiJncjZaNnJYcUl4NW1yTHJTMUlvM2p3IiwibmJmIjoxNzAxODI2NTM4LCJpYXQiOjE3MDE4MjY4MzgsImV4cCI6MTcwMTgzMDQzOCwianRpIjoiOTNmNjY4M2YzY2NjN2RiNDk3M2NhNTkxZWM4NTU2NDJjNDdlM2Q0NSJ9.l54xFk7Ff7FjQTdQSsNq6VYs0nulUH0A48yEuOewSpyoB5Wte6ClyUIYA-3daUIE0ROftX4Ez8eX3wpR42C96lNhfhd7tRSvznU0HCx2ZfFsH9HfpRQgPrRbqPP9JDOZeBlfo6uTnABtECMjeVZoQPht7p-gDNDWI1EjXm4DG-i2bRF3-ETRw_Z7-eOVxtcCozXTjEW6Cm8UekOx8g61H3hvsnZg-8JZPLhxw7Epnpeg8mFuNy-Rqc4zw0c_A14RE7-fJqYqBDIH667Mc-sIQDqtFk2Y77qBFCQjqBz5WTUtRy7E2Ap-zO5uDQ5ax4jklY83uYvY_KYb1o7N5RVZlw
# Defina o diretório de trabalho dentro do contêiner
WORKDIR /app

# Copie o arquivo package.json e package-lock.json para o diretório de trabalho
COPY package*.json ./

# Instale as dependências do projeto
RUN npm install --legacy-peer-deps

# Copie todo o código-fonte da aplicação para o contêiner
COPY . .

# Exponha a porta em que a aplicação estará ouvindo
EXPOSE 8080

# Comando para iniciar a aplicação
CMD ["npm", "start"]
