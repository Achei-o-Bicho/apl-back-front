# Use a imagem Node.js oficial como base
FROM node:18.16.0

ENV DB_URL="mongodb://mongo:27017/ACHEI_O_BICHO"
ENV PORT=8080
ENV REDIS_HOST="redis"
ENV REDIS_PORT=6379
ENV REDIS_PASSWORD='O#lxYry!zEa><FKa'
ENV GLOBAL_PATH=apl-back-front/v1
ENV SECRET_KEY="I[W9X9QG>a0RkgmjiQ>X"
ENV INSTANCE_ID=instance69566
ENV TOKEN_API_MSG=1qwxsr4ofpb3nwuy
ENV TIMESTAMP_OTP=6000
ENV REGION_AWS=us-east-1
ENV AWS_ACCESS_KEY_ID=ASIA37I4JEJJSB2MALHF
ENV AWS_SECRET_ACCESS_KEY=5bSBZRtXSaIIuXvPUXDbVYoKt7HTClI/Dsw7qkCk
ENV AWS_SESSION_TOKEN=FwoGZXIvYXdzEA0aDPhOONRMOMbKUPGebSK8Adr2S2T33tTQ2ewSU32WjbTFnuttDL+4pIP8NNVDvKA8XA8Q54cCNN7JgfK8uzvg9p8KZkdDOa4seIDX4VMnWsqnSux5U5alSlx4dGh/+ZKhSD0L2caX5TzkorV7VoPy+Vj6cXk2J87SfgUbW/KbFwJrjMZNeRV+JrscjXia0BJ9+KdoJg0mT5c2bLbj/Ich5tOCrhKrEmEs2DDLt1xdllMyLo1BPndTfeJw1vCW53WdFsb6+QnEsF0ndFNbKLK5gKsGMi0QcvLFVnRv6044zBBV6YlqkgHKh8ROsnXkKb+XpdL1t39BNsRYq1eDAGpedIo=
ENV BUCKET_S3=pilha-nuvem-tcc-sptech-bucket
ENV BEARER_TOKEN_CLOUD_FUNCTION=eyJhbGciOiJSUzI1NiIsImtpZCI6IjBlNzJkYTFkZjUwMWNhNmY3NTZiZjEwM2ZkN2M3MjAyOTQ3NzI1MDYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXpwIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwiYXVkIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwic3ViIjoiMTE4MDUwNjQ3OTUzMjgxNDM1NDk3IiwiZW1haWwiOiJqb3NlLmJhbmR0ZWNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImF0X2hhc2giOiJtN2ZSNk1WV1hpN2t5YWVLdlNOc3FBIiwibmJmIjoxNzAwNzgxMTUyLCJpYXQiOjE3MDA3ODE0NTIsImV4cCI6MTcwMDc4NTA1MiwianRpIjoiMGI4MzZiYzgxNzgyYzhmNzJhNGI2N2NmMmUyMWI2YTQ5MTJkNTg2MSJ9.BuGJwFqU1dqXuyw_PP3B0BVCFgp_9ROo2M5rPFeUCAFd0hXRNuI7-QB3LSaCiQUe3KaTDmAM5bUthU-GFqnH0BqFtqk2a8nbsc4wv2LrrwVjKwEFPreFTZFmm04JBxtMzH6lmR3hT0u_1QAs6l45frbfZmG7UluAgAEmU7xGHLo9xF6eFEn1Q1QB3O9LITPAVgzijLP5HXM25Ufv5aZEAs77DXeDg3QSJ6D5NzIIS8uurpo2_VRJMb4lBVNqIE05ER_R3JgtJD_OehzQ7BHh3wf6CKZ22gUofkxCAMd0tIr2ioqy5EpE7L0rJBEotQIMWQg7vQOCM36SJRY6fPUSGA
# Defina o diretório de trabalho dentro do contêiner
WORKDIR /app

# Copie o arquivo package.json e package-lock.json para o diretório de trabalho
COPY package*.json ./

# Instale as dependências do projeto
RUN npm install --legacy-peer-deps

# Copie todo o código-fonte da aplicação para o contêiner
COPY . .

# Exponha a porta em que a aplicação estará ouvindo
EXPOSE 8080

# Comando para iniciar a aplicação
CMD ["npm", "start"]
