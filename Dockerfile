# Use a imagem Node.js oficial como base
FROM node:18.16.0

ENV DB_URL="mongodb://mongo:27017/ACHEI_O_BICHO"
ENV MONGODB_PASSWORD=Admin@acbc
ENV MONGODB_USERNAME=adbc
ENV PORT=8080
ENV REDIS_HOST="redis"
ENV REDIS_PORT=6379
ENV REDIS_PASSWORD='O#lxYry!zEa><FKa'
ENV GLOBAL_PATH=apl-back-front/v1
ENV SECRET_KEY="I[W9X9QG>a0RkgmjiQ>X"
ENV INSTANCE_ID=instance69566
ENV TOKEN_API_MSG=1qwxsr4ofpb3nwuy
ENV TIMESTAMP_OTP=6000
ENV REGION_AWS=us-east-1
ENV AWS_ACCESS_KEY_ID=ASIA37I4JEJJQHTUAMFC
ENV AWS_SECRET_ACCESS_KEY=7qk+V6rxdmM9zw+EXM7/NYzoblnr1pVDBbny/Jba
ENV AWS_SESSION_TOKEN=FwoGZXIvYXdzEEwaDC5FCxXBR8R9y7CQnSK8AQSK4w43J8+VpiSqj16+9/QenwSD7Q75gJ53mLzWrJ2uJXk/Z0CFsHlVFc+CLjbJjthaAwCt3HXE5asLAswlS1Uky76pFMU4P0t6KHbS7KKlVgazujLHydzEmvZIrPEPf7QzYvXS+ABaE2co90sXek90xr+fEzh01I3guWlnOy9KA3VIAiH0GRupaD3VKjEQM8a/n6GCGz9BY1j0Y5fM5KZWSWDNxEwAEMHK0cL9n9HOHQmEnjrOrqRmUaXPKJCjjqsGMi1WqBJej2VOzxk+4YU6rjM7/fgO8Sv4tMMWJG1bfaqPAavfaV/pGFdkVJuf+f4=
ENV BEARER_TOKEN_CLOUD_FUNCTION=eyJhbGciOiJSUzI1NiIsImtpZCI6IjBlNzJkYTFkZjUwMWNhNmY3NTZiZjEwM2ZkN2M3MjAyOTQ3NzI1MDYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXpwIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwiYXVkIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwic3ViIjoiMTE4MDUwNjQ3OTUzMjgxNDM1NDk3IiwiZW1haWwiOiJqb3NlLmJhbmR0ZWNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImF0X2hhc2giOiJQZTZDTGNhMm11RTE3Qk5WQnJ2Ri1RIiwibmJmIjoxNzAxMDM1NDA1LCJpYXQiOjE3MDEwMzU3MDUsImV4cCI6MTcwMTAzOTMwNSwianRpIjoiZTJjNWJkNDExYjhmZTQ5MmEzZDYxOTI2YzVhOGE3YmU5NDdmMzVjYyJ9.CmY-saCuWRBeeLRpQgiZDenuBTlAzmzsvOLzj6bPtUslH2fbHfN80yhgRqOow6EQuOj6aPDN1t47cSePUJemI5OzugE7PzHhEQiCRqPuUn2T9d9R93VSIKlUKqAwVPXUPXggnmKcWBxEWgmmSQkRjpO7d64C0YUyqkQPnpuDn0vy0AxWMWU7m4dqedgSE4WgqaaWKqsq8X5m8fJjr4Rnx72llc0oj_iBEZEo9Z4cFWrcfPSqYTk1WTh9ux_aaLnjKgq_8dmigQE10BLBE0OG5lE7Ti0BcHwnscJ8C_0YmiY8rs2dVnOW26VNJkkWYYspe6HYKpe9uO2V1tA9gMVuXw
# Defina o diretório de trabalho dentro do contêiner
WORKDIR /app

# Copie o arquivo package.json e package-lock.json para o diretório de trabalho
COPY package*.json ./

# Instale as dependências do projeto
RUN npm install --legacy-peer-deps

# Copie todo o código-fonte da aplicação para o contêiner
COPY . .

# Exponha a porta em que a aplicação estará ouvindo
EXPOSE 8080

# Comando para iniciar a aplicação
CMD ["npm", "start"]
