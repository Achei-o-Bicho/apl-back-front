# Use a imagem Node.js oficial como base
FROM node:18.16.0

ENV DB_URL="mongodb://mongo:27017/ACHEI_O_BICHO"
ENV MONGODB_PASSWORD=Admin@acbc
ENV MONGODB_USERNAME=adbc
ENV PORT=8080
ENV REDIS_HOST="redis"
ENV REDIS_PORT=6379
ENV REDIS_PASSWORD='O#lxYry!zEa><FKa'
ENV GLOBAL_PATH=apl-back-front/v1
ENV SECRET_KEY="I[W9X9QG>a0RkgmjiQ>X"
ENV INSTANCE_ID=instance69566
ENV TOKEN_API_MSG=1qwxsr4ofpb3nwuy
ENV TIMESTAMP_OTP=6000
ENV REGION_AWS=us-east-1
ENV AWS_ACCESS_KEY_ID=ASIA37I4JEJJQKSOUCPJ
ENV AWS_SECRET_ACCESS_KEY=DdWBM7NrA7dITFUSGXTQTWxq+7/aQ6+P/RIn/iyW
ENV AWS_SESSION_TOKEN=FwoGZXIvYXdzEFAaDDKtLcqiaD9JseHScSK8AeelSRhZOeuCGHn1bbZ7Uu+c65m2NsrpgUPkOIObhukeVFRKRvoRoCK2dPuCk1Vu6Gt/YU8V5OpJBRqIcGimKgQr/qaCKGtyLnsU7HQyI1EVY7ckkI1N4Z2ACP/iw8UGa4JVarE3H7e+8ynnSr7VN0eeS4sw3lDqFeOH91i31YqXO/OnGNxpF8nb737b2E8q/WaLfKiq75/7kAbjBLVFetYjjLZ97na5PX/W4USpldzZ5ITogHb7FFnsLGsEKM6Vj6sGMi2gjhAl72a2IiCohrtzXtPdhZdMnUW8cERy9eS23nQknjvaXiKGZqM5KcqzNUE=
ENV BEARER_TOKEN_CLOUD_FUNCTION=eyJhbGciOiJSUzI1NiIsImtpZCI6IjBlNzJkYTFkZjUwMWNhNmY3NTZiZjEwM2ZkN2M3MjAyOTQ3NzI1MDYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXpwIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwiYXVkIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwic3ViIjoiMTE4MDUwNjQ3OTUzMjgxNDM1NDk3IiwiZW1haWwiOiJqb3NlLmJhbmR0ZWNAZ21haWwuY29tIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImF0X2hhc2giOiJFTDh5bVdCeU4tcV9ZZlJpX2VlaENBIiwibmJmIjoxNzAxMDUxNTIzLCJpYXQiOjE3MDEwNTE4MjMsImV4cCI6MTcwMTA1NTQyMywianRpIjoiZTY3NzA1YmNjZjVmZGE3NDdkMGZiMjVkNDY4ZGM5NTQ5MzY4Njg4NiJ9.TZuhsqnNwNilnMdiQJr_etx6WlJk6_7JKkMvNp7HSm2YvsSbFCZFEubCMRF1SuuOjZgvfvIr9SunJrrw8nOKue07q1aJr_YCH-Gvfkl2Bdl82NoDOq_kXFe_eY1lsPYBoaCR5NruWiJjZmvslBUN-wx5ugaAVTJIfcrX9iLwHuxTf8yitFDvSh957PsqVssMz9TQjywcM-8y6B8OFJlKVDyPn4K46rUUp_smHrg1D_gZsB8eSd6igv5qFUzqK51l336SygNgFpH9T7-Fl1g__97f0Dr9qK55oEoFVOn0NGv-gAguvQZQEZuGsd4Ft1QGd3ixlWGwgxc3_RQnX9wPZw
# Defina o diretório de trabalho dentro do contêiner
WORKDIR /app

# Copie o arquivo package.json e package-lock.json para o diretório de trabalho
COPY package*.json ./

# Instale as dependências do projeto
RUN npm install --legacy-peer-deps

# Copie todo o código-fonte da aplicação para o contêiner
COPY . .

# Exponha a porta em que a aplicação estará ouvindo
EXPOSE 8080

# Comando para iniciar a aplicação
CMD ["npm", "start"]
